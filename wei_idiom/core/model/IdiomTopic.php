<?php
 class IdiomTopic { private static $table = "\167\x65\151\x5f\x69\144\151\x6f\155\x5f\164\157\160\x69\x63"; private static $allFields = array("\x69\x64", "\165\x6e\151\x61\x63\151\x64", "\x6b\145\171\x77\157\x72\144", "\x6b\x65\x79\137\x69\156\x64\145\170", "\x72\x65\x73\137\x69\156\144\145\170", "\x61\154\164\145\x72\x6e\141\x74\x69\x76\x65\x73", "\x69\156\x73\x65\x72\164\137\164\151\155\x65", "\165\x70\x64\141\164\x65\137\x74\x69\155\145", "\163\x74\141\164\x75\163"); const TOPIC_STATUS_DEFAULT = 1; const TOPIC_STATUS_DELETE = -1; public static function create($uniacid, $keyword, $key_index, $alternatives, $res_index) { $data = ["\165\x6e\151\x61\143\x69\x64" => $uniacid, "\x6b\x65\x79\167\x6f\x72\x64" => $keyword, "\153\x65\x79\x5f\151\x6e\144\x65\x78" => $key_index, "\141\x6c\x74\145\162\156\141\164\151\166\145\163" => $alternatives, "\162\145\163\137\151\156\x64\145\x78" => $res_index, "\x69\156\x73\145\x72\164\137\x74\151\x6d\x65" => date("\131\55\155\x2d\x64\x20\110\x3a\151\72\163"), "\x73\x74\141\164\165\163" => self::TOPIC_STATUS_DEFAULT]; return pdo_insert(self::$table, $data); } public static function getById($id) { goto Lk3Ra; FgTWV: return false == $res ? [] : $res; goto VYNp8; fSSk_: $res = pdo_get(self::$table, $where, self::$allFields); goto FgTWV; Lk3Ra: $where = ["\x69\144" => $id]; goto fSSk_; VYNp8: } public static function getTopic5($uniacid, $openid) { goto C4FtQ; C4FtQ: $sql = "\x53\x45\114\x45\x43\124\xd\xa\x9\164\56\151\x64\x2c\15\12\x9\x74\56\x6b\145\171\167\x6f\162\x64\54\15\xa\x9\x74\56\153\145\x79\x5f\x69\156\144\x65\x78\x2c\xd\12\x9\164\56\141\154\x74\x65\x72\x6e\141\164\x69\x76\145\163\xd\12\106\x52\117\115\xd\12\11\x69\155\163\137\167\145\x69\x5f\x69\144\x69\157\x6d\137\164\157\160\151\143\40\164\40\15\xa\x57\110\105\122\105\15\12\40\40\x20\40\x74\x2e\165\x6e\x69\141\143\151\x64\75{$uniacid}\x20\x41\x4e\104\x20\x74\56\163\164\x61\x74\x75\163\x20\x3d\x20\x31\x20\101\x4e\104\x20\xd\xa\x9\x4e\117\124\x20\x45\130\x49\x53\x54\123\40\x28\x20\x53\x45\x4c\x45\103\x54\40\151\x64\40\106\122\117\x4d\x20\x69\x6d\x73\137\x77\x65\x69\137\151\144\x69\157\x6d\x5f\x61\156\x73\167\145\162\40\141\x20\x57\110\105\122\105\x20\x61\x2e\164\x6f\160\x69\x63\137\151\144\40\x3d\40\x74\56\151\x64\x20\x41\x4e\x44\40\141\56\165\x6e\x69\141\143\151\144\75{$uniacid}\40\101\116\x44\x20\141\x2e\157\160\x65\x6e\x69\x64\x20\x3d\40\x27{$openid}\47\40\x29\40\xd\12\x9\x6f\162\x64\x65\x72\40\142\171\40\x72\141\x6e\144\x28\x29\x20\x4c\x49\x4d\x49\124\x20\x31\60\40\x3b"; goto hgXY3; kAgh4: return false == $res ? [] : $res; goto Okql0; hgXY3: $res = pdo_fetchall($sql); goto kAgh4; Okql0: } public static function getTopicList($uniacid, $pageIndex, $pageSize = 10) { goto riR8U; w3oEk: return false == $list ? [] : $list; goto apnG_; D7X6E: $list = pdo_getall(self::$table, $where, self::$allFields, '', "\151\x64\40\x44\105\x53\x43", "{$start}\x2c{$pageSize}"); goto w3oEk; Xur51: $start = ($pageIndex - 1) * $pageSize; goto D7X6E; riR8U: $where = ["\165\156\151\x61\x63\151\144" => $uniacid, "\x73\164\x61\x74\x75\x73" => 1]; goto Xur51; apnG_: } public static function getTopicCount($uniacid) { $where = ["\165\156\151\141\x63\151\144" => $uniacid]; return pdo_count(self::$table, $where, 30); } public static function updateById($uniacid, $id, $pairs) { goto xAE4B; fkxfN: $pairs["\165\160\x64\x61\164\x65\137\x74\151\155\145"] = date("\131\55\x6d\55\x64\x20\x48\72\151\x3a\163"); goto vP9KZ; vP9KZ: return pdo_update(self::$table, $pairs, $where); goto OCtSk; xAE4B: $where = compact("\x75\156\x69\141\x63\x69\x64", "\151\x64"); goto fkxfN; OCtSk: } }